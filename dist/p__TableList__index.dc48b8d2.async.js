"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[325],{89938:function(pe,D,r){r.r(D),r.d(D,{default:function(){return ce}});var W=r(13769),G=r.n(W),z=r(5574),S=r.n(z),N=r(15009),d=r.n(N),Y=r(97857),P=r.n(Y),H=r(99289),p=r.n(H),Z=r(79822),K=r(51042),J=r(6110),Q=r(17882),X=r(2236),k=r(37476),I=r(5966),$=r(90672),q=r(20040),ge=r(80854),v=r(2453),_=r(55102),T=r(14726),ee=r(85265),j=r(67294),F=r(45029),A=r(64317),re=r(86615),ne=r(22452),ae=r(28248),n=r(85893),te=function(s){return(0,n.jsxs)(F.L0,{stepsProps:{size:"small"},stepsFormRender:function(i,m){return(0,n.jsx)(ae.Z,{width:640,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:"\u89C4\u5219\u914D\u7F6E",open:s.updateModalOpen,footer:m,onCancel:function(){s.onCancel()},children:i})},onFinish:s.onSubmit,children:[(0,n.jsxs)(F.L0.StepForm,{initialValues:{name:s.values.name,desc:s.values.desc},title:"\u57FA\u672C\u4FE1\u606F",children:[(0,n.jsx)(I.Z,{name:"name",label:"\u89C4\u5219\u540D\u79F0",width:"md",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u89C4\u5219\u540D\u79F0\uFF01"}]}),(0,n.jsx)($.Z,{name:"desc",width:"md",label:"\u89C4\u5219\u63CF\u8FF0",placeholder:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26\u7684\u89C4\u5219\u63CF\u8FF0\uFF01",min:5}]})]}),(0,n.jsxs)(F.L0.StepForm,{initialValues:{target:"0",template:"0"},title:"\u914D\u7F6E\u89C4\u5219\u5C5E\u6027",children:[(0,n.jsx)(A.Z,{name:"target",width:"md",label:"\u76D1\u63A7\u5BF9\u8C61",valueEnum:{0:"\u8868\u4E00",1:"\u8868\u4E8C"}}),(0,n.jsx)(A.Z,{name:"template",width:"md",label:"\u89C4\u5219\u6A21\u677F",valueEnum:{0:"\u89C4\u5219\u6A21\u677F\u4E00",1:"\u89C4\u5219\u6A21\u677F\u4E8C"}}),(0,n.jsx)(re.Z.Group,{name:"type",label:"\u89C4\u5219\u7C7B\u578B",options:[{value:"0",label:"\u5F3A"},{value:"1",label:"\u5F31"}]})]}),(0,n.jsxs)(F.L0.StepForm,{initialValues:{type:"1",frequency:"month"},title:"\u8BBE\u5B9A\u8C03\u5EA6\u5468\u671F",children:[(0,n.jsx)(ne.Z,{name:"time",width:"md",label:"\u5F00\u59CB\u65F6\u95F4",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5F00\u59CB\u65F6\u95F4\uFF01"}]}),(0,n.jsx)(A.Z,{name:"frequency",label:"\u76D1\u63A7\u5BF9\u8C61",width:"md",valueEnum:{month:"\u6708",week:"\u5468"}})]})]})},ue=te,se=["defaultRender"],le=function(){var g=p()(d()().mark(function s(l){var i;return d()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=v.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),e.prev=1,e.next=4,(0,Z.HP)(P()({},l));case 4:return i(),v.ZP.success("Added successfully"),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(1),i(),v.ZP.error("Adding failed, please try again!"),e.abrupt("return",!1);case 14:case"end":return e.stop()}},s,null,[[1,9]])}));return function(l){return g.apply(this,arguments)}}(),ie=function(){var g=p()(d()().mark(function s(l){var i;return d()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=v.ZP.loading("Configuring"),e.prev=1,e.next=4,(0,Z.D7)({name:l.name,desc:l.desc,key:l.key});case 4:return i(),v.ZP.success("Configuration is successful"),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(1),i(),v.ZP.error("Configuration failed, please try again!"),e.abrupt("return",!1);case 14:case"end":return e.stop()}},s,null,[[1,9]])}));return function(l){return g.apply(this,arguments)}}(),de=function(){var g=p()(d()().mark(function s(l){var i;return d()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=v.ZP.loading("\u6B63\u5728\u5220\u9664"),l){e.next=3;break}return e.abrupt("return",!0);case 3:return e.prev=3,e.next=6,(0,Z.DV)({key:l.map(function(R){return R.key})});case 6:return i(),v.ZP.success("Deleted successfully and will refresh soon"),e.abrupt("return",!0);case 11:return e.prev=11,e.t0=e.catch(3),i(),v.ZP.error("Delete failed, please try again"),e.abrupt("return",!1);case 16:case"end":return e.stop()}},s,null,[[3,11]])}));return function(l){return g.apply(this,arguments)}}(),oe=function(){var s=(0,j.useState)(!1),l=S()(s,2),i=l[0],m=l[1],e=(0,j.useState)(!1),R=S()(e,2),fe=R[0],w=R[1],ve=(0,j.useState)(!1),B=S()(ve,2),E=B[0],O=B[1],y=(0,j.useRef)(),me=(0,j.useState)(),L=S()(me,2),c=L[0],C=L[1],he=(0,j.useState)([]),M=S()(he,2),x=M[0],U=M[1],b=[{title:"\u89C4\u5219\u540D\u79F0",dataIndex:"name",tip:"The rule name is the unique key",render:function(a,t){return(0,n.jsx)("a",{onClick:function(){C(t),O(!0)},children:a})}},{title:"\u63CF\u8FF0",dataIndex:"desc",valueType:"textarea"},{title:"\u670D\u52A1\u8C03\u7528\u6B21\u6570",dataIndex:"callNo",sorter:!0,hideInForm:!0,renderText:function(a){return"".concat(a,"\u4E07")}},{title:"\u72B6\u6001",dataIndex:"status",hideInForm:!0,valueEnum:{0:{text:"\u5173\u95ED",status:"Default"},1:{text:"\u8FD0\u884C\u4E2D",status:"Processing"},2:{text:"\u5DF2\u4E0A\u7EBF",status:"Success"},3:{text:"\u5F02\u5E38",status:"Error"}}},{title:"\u4E0A\u6B21\u8C03\u5EA6\u65F6\u95F4",sorter:!0,dataIndex:"updatedAt",valueType:"dateTime",renderFormItem:function(a,t,f){var h=t.defaultRender,o=G()(t,se),V=f.getFieldValue("status");return"".concat(V)==="0"?!1:"".concat(V)==="3"?(0,n.jsx)(_.Z,P()(P()({},o),{},{placeholder:"\u8BF7\u8F93\u5165\u5F02\u5E38\u539F\u56E0\uFF01"})):h(a)}},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(a,t){return[(0,n.jsx)("a",{onClick:function(){w(!0),C(t)},children:"\u914D\u7F6E"},"config"),(0,n.jsx)("a",{href:"https://procomponents.ant.design/",children:"\u8BA2\u9605\u8B66\u62A5"},"subscribeAlert")]}}];return(0,n.jsxs)(J._z,{children:[(0,n.jsx)(Q.Z,{headerTitle:"\u67E5\u8BE2\u8868\u683C",actionRef:y,rowKey:"key",search:{labelWidth:120},toolBarRender:function(){return[(0,n.jsxs)(T.ZP,{type:"primary",onClick:function(){m(!0)},children:[(0,n.jsx)(K.Z,{})," \u65B0\u5EFA"]},"primary")]},request:Z.jR,columns:b,rowSelection:{onChange:function(a,t){U(t)}}}),(x==null?void 0:x.length)>0&&(0,n.jsxs)(X.S,{extra:(0,n.jsxs)("div",{children:["\u5DF2\u9009\u62E9"," ",(0,n.jsx)("a",{style:{fontWeight:600},children:x.length})," ","\u9879 \xA0\xA0",(0,n.jsxs)("span",{children:["\u670D\u52A1\u8C03\u7528\u6B21\u6570\u603B\u8BA1 ",x.reduce(function(u,a){return u+a.callNo},0)," \u4E07"]})]}),children:[(0,n.jsx)(T.ZP,{onClick:p()(d()().mark(function u(){var a,t;return d()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,de(x);case 2:U([]),(a=y.current)===null||a===void 0||(t=a.reloadAndRest)===null||t===void 0||t.call(a);case 4:case"end":return h.stop()}},u)})),children:"\u6279\u91CF\u5220\u9664"}),(0,n.jsx)(T.ZP,{type:"primary",children:"\u6279\u91CF\u5BA1\u6279"})]}),(0,n.jsxs)(k.Y,{title:"\u65B0\u5EFA\u89C4\u5219",width:"400px",open:i,onOpenChange:m,onFinish:function(){var u=p()(d()().mark(function a(t){var f;return d()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,le(t);case 2:f=o.sent,f&&(m(!1),y.current&&y.current.reload());case 4:case"end":return o.stop()}},a)}));return function(a){return u.apply(this,arguments)}}(),children:[(0,n.jsx)(I.Z,{rules:[{required:!0,message:"\u89C4\u5219\u540D\u79F0\u4E3A\u5FC5\u586B\u9879"}],width:"md",name:"name"}),(0,n.jsx)($.Z,{width:"md",name:"desc"})]}),(0,n.jsx)(ue,{onSubmit:function(){var u=p()(d()().mark(function a(t){var f;return d()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,ie(t);case 2:f=o.sent,f&&(w(!1),C(void 0),y.current&&y.current.reload());case 4:case"end":return o.stop()}},a)}));return function(a){return u.apply(this,arguments)}}(),onCancel:function(){w(!1),E||C(void 0)},updateModalOpen:fe,values:c||{}}),(0,n.jsx)(ee.Z,{width:600,open:E,onClose:function(){C(void 0),O(!1)},closable:!1,children:(c==null?void 0:c.name)&&(0,n.jsx)(q.vY,{column:2,title:c==null?void 0:c.name,request:p()(d()().mark(function u(){return d()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{data:c||{}});case 1:case"end":return t.stop()}},u)})),params:{id:c==null?void 0:c.name},columns:b})})]})},ce=oe}}]);
